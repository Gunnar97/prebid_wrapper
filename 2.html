<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="/favicon.png">
    <script async src="//www.googletagservices.com/tag/js/gpt.js"></script>
    <script async src="//cdn.jsdelivr.net/npm/prebid.js@latest/dist/not-for-prod/prebid.js"></script>
    <script>
        var div_1_sizes = [
            [300, 250],
            [300, 600]
        ];
        var div_2_sizes = [
            [728, 90],
            [970, 250]
        ];
        var PREBID_TIMEOUT = 1000;
        var FAILSAFE_TIMEOUT = 3000;

        var adUnits = [
            {
                code: '/19968336/header-bid-tag-0',
                mediaTypes: {
                    banner: {
                        sizes: div_1_sizes
                    }
                },
                bids: [{
                    bidder: 'adtelligent',
                    params: {
                        aid: 350975
                    }
                }]
            },
            {
                code: '/19968336/header-bid-tag-1',
                mediaTypes: {
                    banner: {
                        sizes: div_2_sizes
                    }
                },
                bids: [{
                    bidder: 'adtelligent',
                    params: {
                        aid: 350975
                    }
                }]
            }
        ];

        // ======== DO NOT EDIT BELOW THIS LINE =========== //
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];

        googletag.cmd.push(function() {
            googletag.pubads().disableInitialLoad();
        });

        var pbjs = pbjs || {};
        pbjs.que = pbjs.que || [];

        pbjs.que.push(function() {
            pbjs.addAdUnits(adUnits);
            pbjs.requestBids({
                bidsBackHandler: renderWinningBids,
                timeout: PREBID_TIMEOUT
            });
        });

        function renderWinningBids() {
            var winningBids = pbjs.getHighestCpmBids();
            winningBids.forEach(function(bid) {
                var adId = bid.adId;
                var adUnitCode = bid.adUnitCode;
                var adDivId = getAdDivId(adUnitCode);
                if (adDivId) {
                    renderAdInIframe(adId, adDivId);
                }
            });
        }

        function getAdDivId(adUnitCode) {
            if (adUnitCode === '/19968336/header-bid-tag-0') {
                return 'div-1';
            } else if (adUnitCode === '/19968336/header-bid-tag-1') {
                return 'div-2';
            }
            return null;
        }

        function renderAdInIframe(adId, adDivId) {
            var adContainer = document.getElementById(adDivId);
            if (adContainer) {
                var iframe = document.createElement('iframe');
                iframe.style.border = '0';
                iframe.style.width = '100%';
                iframe.style.height = '100%';
                adContainer.appendChild(iframe);

                var doc = iframe.contentWindow.document;
                doc.open();
                doc.write('<script>parent.pbjs.renderAd(parent.document, "' + adId + '");<\/script>');
                doc.close();
            }
        }

        googletag.cmd.push(function() {
            googletag.defineSlot('/19968336/header-bid-tag-0', div_1_sizes, 'div-1').addService(googletag.pubads());
            googletag.defineSlot('/19968336/header-bid-tag-1', div_2_sizes, 'div-2').addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });

    </script>
</head>

<body>
<h2>Basic Prebid.js Example</h2>

<h5>Div-1</h5>
<div id='div-1' style="width: 300px; height: 250px;"></div>

<br>

<h5>Div-2</h5>
<div id='div-2' style="width: 728px; height: 90px;"></div>
</body>
</html>
